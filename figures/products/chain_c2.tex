\documentclass[12pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage{graphicx,xcolor}
\usepackage[active,tightpage]{preview}
\input{tikz_products}
\PreviewEnvironment{tikzpicture}
\begin{document}
\begin{tikzpicture}[node distance=4em,level distance=1.6cm,sibling distance=5mm,draw=orange!80]
  \node[M] (bs) {BS}  [thick]
  child[grow=right] { node[P] (be) {}
    child[grow=right,->] { node[M] (rs1-1) {RS 1}
      child[grow=right] { node[P] (be-blue) {}
        child[grow=right,->] { node[M] (rs2-1) {RS 2}
          child[grow=up,level distance=1.2cm,<-]  { node [P] (rs2-1-ae1) {} }
          child[grow=right] { node[P] (be-blue-green) {}
            child[grow=right,->] { node[M] (cs1) {CS 1}
              child[grow=up,level distance=1.2cm,<-]  { node [P] (cs-input) {} }
              child[grow=right] { node[P] (be-blue-green-cap) {} }
            }
          }
        }
      }
    }
  };
  \draw (be) pic [scale=.3] {base=silver};
  \draw [every pic/.style={scale=0.3}] (be-blue) pic {base=silver} ++(0,.175) pic {ring=blue};
  \draw [every pic/.style={scale=0.3}] (be-blue-green)
  pic {base=silver} ++(0,.17) pic {ring=blue} ++(0,.17) pic {ring=green};
  \draw [every pic/.style={scale=0.3}] (be-blue-green-cap)
  pic {base=silver} ++(0,.17) pic {ring=blue} ++(0,.17) pic {ring=green} ++(0,.06) pic {cap=black};
  \draw (rs2-1-ae1) pic [scale=.3] {any-base};
  \draw (cs-input) pic [scale=0.3] {any-base} ++(0,.06) pic [scale=0.3] {cap=black};
\end{tikzpicture}
\end{document}
%%% Local Variables: 
%%% mode: latex
%%% TeX-master: t
%%% End: 
